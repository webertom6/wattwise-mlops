<!-- application.html -->
<!DOCTYPE html>
<html>
<head>
    <title>Application</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">


    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
crossorigin=""/>

<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
crossorigin=""></script>

</head>

<style>
    #map {
        margin-top: 10px;
        height: 100vh;
        width: 175vh;
    }
    html, body {
        height: 100%;
        padding: 0;
        margin: 0;
        display: flex;
        flex-direction: column;
        align-items: center;
    }
</style>

<body class="text-center">
<!--
    <div class="container mt-5">
        <h1>Select a Country</h1>
        <ul class="list-group mt-3">
            <li class="list-group-item"><a href="/country/France" class="text-decoration-none">France</a></li>
            <li class="list-group-item"><a href="/country/Belgium" class="text-decoration-none">Belgium</a></li>
            <li class="list-group-item"><a href="/country/Spain" class="text-decoration-none">Spain</a></li>
        </ul>
    </div>
-->
    <div id="map"></div>


    <h1>Select a Country</h1>
    <script>
        const energySources = JSON.parse(`{{ energy_sources | tojson | safe }}`);
        const countries = ['belgium', 'spain', 'france', 'germany', 'luxembourg', 'netherlands', 'portugal', 'italy', 'romania'];

        var map = L.map('map').setView([48.210033, 16.363449], 4);

        L.tileLayer('https://api.maptiler.com/maps/landscape/{z}/{x}/{y}.png?key=axMDN6DigJen4gM7yGIi', {
            attribution: '<a href="https://www.maptiler.com/copyright/" target="_blank">&copy; MapTiler</a> <a href="https://www.openstreetmap.org/copyright" target="_blank">&copy; OpenStreetMap contributors</a>'
        }).addTo(map);

        for (let country of countries) {
            fetch(`/static/countriesGEO/${country}.json`)
                .then(response => response.json())
                .then(data => {
                    const layer = L.geoJSON(data).addTo(map);
                    layer.bindPopup(() => {
                        let html = `Energy sources for ${country}:</br><ul>`;
                        for (let source of energySources) {
                            html += `<li><a href="/predict/${country}/${encodeURIComponent(source)}">${source}</a></li>`;
                        }
                        html += `</ul>`;
                        return html;
                    });
                })
                .catch(error => console.error(`Error loading ${country}.json:`, error));
        }
    </script>

</body>
</html>




<!--All countries GeoJSON : https://github.com/georgique/world-geojson/-->
