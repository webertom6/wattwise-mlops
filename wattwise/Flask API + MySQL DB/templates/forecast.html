<!DOCTYPE html>
<html>
<head>
    <title>{{ energy }} Forecast</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
        }
        #chart {
            width: 100%;
            height: 500px;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h2>{{ energy }} Forecast for {{ country }}</h2>

    <div>
        <strong>Summary:</strong><br>
        üîª Min: {{ stats.min }} &nbsp;&nbsp; üî∫ Max: {{ stats.max }} &nbsp;&nbsp; üìä Avg: {{ stats.avg }}
    </div>

    <div id="chart"></div>

    <script>
        const plotData = JSON.parse(`{{ data | tojson | safe }}`);
        const dates = plotData.map(item => item.date);
        const values = plotData.map(item => item.value);

        const trace = {
            x: dates,
            y: values,
            type: 'scatter',
            mode: 'lines+markers',
            name: '{{ energy }} Production',
            marker: { size: 6 }
        };

        const layout = {
            title: '{{ energy }} Forecast Over Time',
            xaxis: {
                title: 'Date',
                tickangle: -45,
                automargin: true
            },
            yaxis: {
                title: '{{ energy }} Production (MWh or similar)',
                automargin: true
            },
            margin: { t: 50, b: 80 }
        };

        Plotly.newPlot('chart', [trace], layout);
    </script>
    <a href="/application" style="display: inline-block; margin: 10px 0; padding: 8px 12px; background-color: #007bff; color: white; text-decoration: none; border-radius: 4px;">
        ‚¨ÖÔ∏è Back to Application
    </a>
</body>
</html>
